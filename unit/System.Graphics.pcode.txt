module System.Graphics, id=1489900195
interface
uses System, System.Graphics.Primitive
type
  object type 'Color'
    fields:
      'a' index 0 type 'Byte'
      'b' index 3 type 'Byte'
      'g' index 2 type 'Byte'
      'r' index 1 type 'Byte'
    methods:
      constructor
      declaration
      parameter 'this' type 'Color'
      parameter 'a' type 'Byte'
      parameter 'r' type 'Byte'
      parameter 'g' type 'Byte'
      parameter 'b' type 'Byte'
      object type 'Color'
      module id 1489900195
      implementation id 2
      frame size: 0

  object type 'Pen'
    fields:
      'color' index 0 type 'Color'
      'width' index 1 type 'real'
    methods:
      constructor
      declaration
      parameter 'this' type 'Pen'
      parameter 'color' type 'Color'
      object type 'Pen'
      module id 1489900195
      implementation id 3
      frame size: 0

      constructor
      declaration
      parameter 'this' type 'Pen'
      parameter 'color' type 'Color'
      parameter 'width' type 'real'
      object type 'Pen'
      module id 1489900195
      implementation id 4
      frame size: 0

  object type 'Graphics'
    fields:
      'dpiX' index 1 type 'real'
      'dpiY' index 2 type 'real'
      'native' index 0 type 'pointer'
    methods:
      constructor
      declaration
      parameter 'this' type 'Graphics'
      object type 'Graphics'
      module id 1489900195
      implementation id 5
      frame size: 0

      procedure 'DrawLine'
      declaration
      common name 'DrawLine'
      parameter 'this' type 'Graphics'
      parameter 'pen' type 'Pen'
      parameter 's' type 'Point'
      parameter 'e' type 'Point'
      object type 'Graphics'
      external
      frame size: 0

  object type 'Bitmap'
    fields:
      'native' index 2 type 'pointer'
      'x' index 0 type 'integer'
      'y' index 1 type 'integer'
    methods:
      constructor
      declaration
      parameter 'this' type 'Bitmap'
      parameter 'x' type 'integer'
      parameter 'y' type 'integer'
      object type 'Bitmap'
      module id 1489900195
      implementation id 7
      frame size: 0

      function 'GetGraphics'
      declaration
      common name 'GetGraphics'
      parameter 'this' type 'Bitmap'
      object type 'Bitmap'
      external
      frame size: 0

      procedure 'Save'
      declaration
      common name 'Save'
      parameter 'this' type 'Bitmap'
      parameter 'fileName' type 'string'
      object type 'Bitmap'
      external
      frame size: 0

  object type 'Shape'
    virtual
    fields:
      '@vmt' index 0 type 'null'
    methods:
      constructor
      declaration
      parameter 'this' type 'Shape'
      object type 'Shape'
      module id 1489900195
      implementation id 10
      frame size: 0

      procedure 'Draw'
      declaration
      virtual
      common name 'Draw'
      parameter 'this' type 'Shape'
      parameter 'graphics' type 'Graphics'
      object type 'Shape'
      module id 1489900195
      implementation id 11
      frame size: 0

      function 'Bounds'
      declaration
      virtual
      common name 'Bounds'
      parameter 'this' type 'Shape'
      object type 'Shape'
      module id 1489900195
      implementation id 12
      frame size: 0

  array type 'ShapeArray'
    element type Shape

  object type 'CompoundShape'
    virtual
    base type 'Shape'
    fields:
      '@vmt' index 0 type 'null'
      'components' index 2 type 'ShapeArray'
      'count' index 1 type 'integer'
    methods:
      constructor
      declaration
      parameter 'this' type 'CompoundShape'
      object type 'CompoundShape'
      module id 1489900195
      implementation id 13
      frame size: 0

      procedure 'Add'
      declaration
      common name 'Add'
      parameter 'this' type 'CompoundShape'
      parameter 'shape' type 'Shape'
      object type 'CompoundShape'
      module id 1489900195
      implementation id 14
      frame size: 0

      procedure 'Draw'
      declaration
      override
      common name 'Draw'
      parameter 'this' type 'CompoundShape'
      parameter 'graphics' type 'Graphics'
      object type 'CompoundShape'
      module id 1489900195
      implementation id 15
      frame size: 0

      function 'Bounds'
      declaration
      override
      common name 'Bounds'
      parameter 'this' type 'CompoundShape'
      object type 'CompoundShape'
      module id 1489900195
      implementation id 16
      frame size: 0

const
  constant 'dpiX'
    type 'real'
    value '96'
  constant 'dpiY'
    type 'real'
    value '96'
  constant 'inchMM'
    type 'real'
    value '25.400000'
  constant 'pointMM'
    type 'real'
    value '0.351450'
var
  global 'black' index 0 type 'Color'
  global 'white' index 1 type 'Color'
  global 'blackPen' index 2 type 'Pen'
function 'MMToPixels'
declaration
common name 'MMToPixels'
parameter 'mm' type 'real'
parameter 'dpi' type 'real'
module id 1489900195
id 0
implementation id 0
frame size: 0

function 'PixelsToMM'
declaration
common name 'PixelsToMM'
parameter 'pixels' type 'integer'
parameter 'dpi' type 'real'
module id 1489900195
id 1
implementation id 1
frame size: 0

implementation
uses System
procedure 'Graphics.DrawLine'
definition
common name 'DrawLine'
parameter 'this' type 'Graphics'
parameter 'pen' type 'Pen'
parameter 's' type 'Point'
parameter 'e' type 'Point'
object type 'Graphics'
external
module id 1489900195
id 6
frame size: 0

procedure 'Bitmap.Save'
definition
common name 'Save'
parameter 'this' type 'Bitmap'
parameter 'fileName' type 'string'
object type 'Bitmap'
external
module id 1489900195
id 9
frame size: 0

procedure 'Shape.Draw'
definition
common name 'Draw'
parameter 'this' index 0 type 'Shape'
parameter 'graphics' index 1 type 'Graphics'
object type 'Shape'
module id 1489900195
id 11
frame size: 2
code
  0 : receive(2)
  1 : nop

procedure 'CompoundShape.Add'
definition
common name 'Add'
parameter 'this' index 0 type 'CompoundShape'
parameter 'shape' index 1 type 'Shape'
object type 'CompoundShape'
module id 1489900195
id 14
frame size: 7
var
  local 'newLength' index 2 type 'integer'
  local 'i' index 3 type 'integer'
  local 'newComponents' index 4 type 'ShapeArray'
  local '@tmp0' index 5 type 'integer'
  local '@tmp1' index 6 type 'integer'
code
  0 : receive(2)
  1 : load_local(0)
  2 : load_field(1)
  3 : load_local(0)
  4 : load_field(2)
  5 : array_length
  6 : equal_int
  7 : branch(8, 74)
  8 : load_local(0)
  9 : load_field(2)
  10 : array_length
  11 : push_value(4)
  12 : less_int
  13 : branch(14, 17)
  14 : push_value(4)
  15 : store_local(2)
  16 : jump(24)
  17 : push_value(2)
  18 : load_local(0)
  19 : load_field(2)
  20 : array_length
  21 : mul_int
  22 : store_local(2)
  23 : jump(24)
  24 : load_local(2)
  25 : new_object(Shape)
  26 : load_element
  27 : store_local(4)
  28 : push_value(0)
  29 : store_local(5)
  30 : load_local(0)
  31 : load_field(1)
  32 : push_value(1)
  33 : minus_int
  34 : store_local(6)
  35 : load_local(5)
  36 : load_local(6)
  37 : less_or_equal_int
  38 : branch(39, 68)
  39 : load_local(5)
  40 : store_local(3)
  41 : load_local(3)
  42 : load_local(0)
  43 : load_field(2)
  44 : load_element
  45 : load_local(3)
  46 : load_local(4)
  47 : store_element
  48 : nop
  49 : jump(50)
  50 : load_local(3)
  51 : load_local(6)
  52 : not_equal_int
  53 : branch(54, 66)
  54 : load_local(3)
  55 : call_stdfn(Succ, 6)
  56 : store_local(3)
  57 : load_local(3)
  58 : load_local(0)
  59 : load_field(2)
  60 : load_element
  61 : load_local(3)
  62 : load_local(4)
  63 : store_element
  64 : nop
  65 : jump(50)
  66 : nop
  67 : jump(68)
  68 : nop
  69 : load_local(4)
  70 : load_local(0)
  71 : store_field(2)
  72 : nop
  73 : jump(74)
  74 : load_local(1)
  75 : load_local(0)
  76 : load_field(1)
  77 : load_local(0)
  78 : load_field(2)
  79 : store_element
  80 : load_local(0)
  81 : load_field(1)
  82 : call_stdfn(Succ, 6)
  83 : load_local(0)
  84 : store_field(1)
  85 : nop

procedure 'CompoundShape.Draw'
definition
common name 'Draw'
parameter 'this' index 0 type 'CompoundShape'
parameter 'graphics' index 1 type 'Graphics'
object type 'CompoundShape'
module id 1489900195
id 15
frame size: 6
var
  local 'i' index 2 type 'integer'
  local 's' index 3 type 'Shape'
  local '@tmp0' index 4 type 'integer'
  local '@tmp1' index 5 type 'integer'
code
  0 : receive(2)
  1 : push_value(0)
  2 : store_local(4)
  3 : load_local(0)
  4 : load_field(1)
  5 : push_value(1)
  6 : minus_int
  7 : store_local(5)
  8 : load_local(4)
  9 : load_local(5)
  10 : less_or_equal_int
  11 : branch(12, 45)
  12 : load_local(4)
  13 : store_local(2)
  14 : load_local(2)
  15 : load_local(0)
  16 : load_field(2)
  17 : load_element
  18 : store_local(3)
  19 : load_local(3)
  20 : load_local(1)
  21 : load_local(3)
  22 : call_virtual(0)
  23 : nop
  24 : jump(25)
  25 : load_local(2)
  26 : load_local(5)
  27 : not_equal_int
  28 : branch(29, 43)
  29 : load_local(2)
  30 : call_stdfn(Succ, 6)
  31 : store_local(2)
  32 : load_local(2)
  33 : load_local(0)
  34 : load_field(2)
  35 : load_element
  36 : store_local(3)
  37 : load_local(3)
  38 : load_local(1)
  39 : load_local(3)
  40 : call_virtual(0)
  41 : nop
  42 : jump(25)
  43 : nop
  44 : jump(45)
  45 : nop
  46 : nop

function 'MMToPixels'
definition
common name 'MMToPixels'
parameter 'mm' index 0 type 'real'
parameter 'dpi' index 1 type 'real'
module id 1489900195
id 0
frame size: 3
var
  local '@result' index 2 type 'integer'
code
  0 : receive(2)
  1 : load_local(0)
  2 : load_local(1)
  3 : mul_real
  4 : push_value(25.400000)
  5 : fractional_divide_real
  6 : store_local(2)
  7 : nop
  8 : load_result_var(2)

function 'PixelsToMM'
definition
common name 'PixelsToMM'
parameter 'pixels' index 0 type 'integer'
parameter 'dpi' index 1 type 'real'
module id 1489900195
id 1
frame size: 3
var
  local '@result' index 2 type 'real'
code
  0 : receive(2)
  1 : load_local(0)
  2 : int_to_real
  3 : push_value(25.400000)
  4 : mul_real
  5 : load_local(1)
  6 : fractional_divide_real
  7 : store_local(2)
  8 : nop
  9 : load_result_var(2)

function 'Bitmap.GetGraphics'
definition
common name 'GetGraphics'
parameter 'this' type 'Bitmap'
object type 'Bitmap'
external
module id 1489900195
id 8
frame size: 0

function 'Shape.Bounds'
definition
common name 'Bounds'
parameter 'this' index 0 type 'Shape'
object type 'Shape'
module id 1489900195
id 12
frame size: 2
var
  local '@result' index 1 type 'Rect'
code
  0 : receive(1)
  1 : new_object(Rect)
  2 : call_ctor(1205691996, 7)
  3 : store_local(1)
  4 : nop
  5 : load_result_var(1)

function 'CompoundShape.Bounds'
definition
common name 'Bounds'
parameter 'this' index 0 type 'CompoundShape'
object type 'CompoundShape'
module id 1489900195
id 16
frame size: 8
var
  local 'i' index 1 type 'integer'
  local 's' index 2 type 'Shape'
  local 'bounds' index 3 type 'Rect'
  local 'r' index 4 type 'Rect'
  local '@result' index 5 type 'Rect'
  local '@tmp0' index 6 type 'integer'
  local '@tmp1' index 7 type 'integer'
code
  0 : receive(1)
  1 : new_object(Rect)
  2 : call_ctor(1205691996, 7)
  3 : store_local(3)
  4 : push_value(0)
  5 : store_local(6)
  6 : load_local(0)
  7 : load_field(1)
  8 : push_value(1)
  9 : minus_int
  10 : store_local(7)
  11 : load_local(6)
  12 : load_local(7)
  13 : less_or_equal_int
  14 : branch(15, 87)
  15 : load_local(6)
  16 : store_local(1)
  17 : load_local(1)
  18 : load_local(0)
  19 : load_field(2)
  20 : load_element
  21 : store_local(2)
  22 : load_local(2)
  23 : load_local(2)
  24 : call_virtual(1)
  25 : store_local(4)
  26 : load_local(4)
  27 : call_function(System.Graphics.Primitive:Rect.IsEmpty, 1205691996, 16)
  28 : not_bool
  29 : branch(30, 44)
  30 : load_local(3)
  31 : call_function(System.Graphics.Primitive:Rect.IsEmpty, 1205691996, 16)
  32 : branch(33, 36)
  33 : load_local(4)
  34 : store_local(3)
  35 : jump(41)
  36 : load_local(3)
  37 : load_local(4)
  38 : call_function(System.Graphics.Primitive:Union, 1205691996, 28)
  39 : store_local(3)
  40 : jump(41)
  41 : nop
  42 : load_result_var(5)
  43 : jump(44)
  44 : nop
  45 : load_result_var(5)
  46 : jump(47)
  47 : load_local(1)
  48 : load_local(7)
  49 : not_equal_int
  50 : branch(51, 85)
  51 : load_local(1)
  52 : call_stdfn(Succ, 6)
  53 : store_local(1)
  54 : load_local(1)
  55 : load_local(0)
  56 : load_field(2)
  57 : load_element
  58 : store_local(2)
  59 : load_local(2)
  60 : load_local(2)
  61 : call_virtual(1)
  62 : store_local(4)
  63 : load_local(4)
  64 : call_function(System.Graphics.Primitive:Rect.IsEmpty, 1205691996, 16)
  65 : not_bool
  66 : branch(67, 81)
  67 : load_local(3)
  68 : call_function(System.Graphics.Primitive:Rect.IsEmpty, 1205691996, 16)
  69 : branch(70, 73)
  70 : load_local(4)
  71 : store_local(3)
  72 : jump(78)
  73 : load_local(3)
  74 : load_local(4)
  75 : call_function(System.Graphics.Primitive:Union, 1205691996, 28)
  76 : store_local(3)
  77 : jump(78)
  78 : nop
  79 : load_result_var(5)
  80 : jump(81)
  81 : nop
  82 : load_result_var(5)
  83 : load_result_var(5)
  84 : jump(47)
  85 : load_result_var(5)
  86 : jump(87)
  87 : load_result_var(5)
  88 : load_local(3)
  89 : store_local(5)
  90 : nop
  91 : load_result_var(5)

constructor
definition
parameter 'this' index 0 type 'Color'
parameter 'a' index 1 type 'Byte'
parameter 'r' index 2 type 'Byte'
parameter 'g' index 3 type 'Byte'
parameter 'b' index 4 type 'Byte'
object type 'Color'
module id 1489900195
id 2
frame size: 5
code
  0 : receive(5)
  1 : load_local(1)
  2 : load_local(0)
  3 : store_field(0)
  4 : load_local(2)
  5 : load_local(0)
  6 : store_field(1)
  7 : load_local(3)
  8 : load_local(0)
  9 : store_field(2)
  10 : load_local(4)
  11 : load_local(0)
  12 : store_field(3)
  13 : nop

constructor
definition
parameter 'this' index 0 type 'Pen'
parameter 'color' index 1 type 'Color'
object type 'Pen'
module id 1489900195
id 3
frame size: 2
code
  0 : receive(2)
  1 : load_local(1)
  2 : load_local(0)
  3 : store_field(0)
  4 : push_value(1)
  5 : push_value(96)
  6 : call_function(System.Graphics:PixelsToMM, 1489900195, 1)
  7 : load_local(0)
  8 : store_field(1)
  9 : nop

constructor
definition
parameter 'this' index 0 type 'Pen'
parameter 'color' index 1 type 'Color'
parameter 'width' index 2 type 'real'
object type 'Pen'
module id 1489900195
id 4
frame size: 3
code
  0 : receive(3)
  1 : load_local(1)
  2 : load_local(0)
  3 : store_field(0)
  4 : load_local(2)
  5 : load_local(0)
  6 : store_field(1)
  7 : nop

constructor
definition
parameter 'this' index 0 type 'Graphics'
object type 'Graphics'
module id 1489900195
id 5
frame size: 1
code
  0 : receive(1)
  1 : nop

constructor
definition
parameter 'this' index 0 type 'Bitmap'
parameter 'x' index 1 type 'integer'
parameter 'y' index 2 type 'integer'
object type 'Bitmap'
module id 1489900195
id 7
frame size: 3
code
  0 : receive(3)
  1 : load_local(1)
  2 : load_local(0)
  3 : store_field(0)
  4 : load_local(2)
  5 : load_local(0)
  6 : store_field(1)
  7 : nop

constructor
definition
parameter 'this' index 0 type 'Shape'
object type 'Shape'
module id 1489900195
id 10
frame size: 1
code
  0 : receive(1)
  1 : nop

constructor
definition
parameter 'this' index 0 type 'CompoundShape'
object type 'CompoundShape'
module id 1489900195
id 13
frame size: 1
code
  0 : receive(1)
  1 : push_value(0)
  2 : load_local(0)
  3 : store_field(1)
  4 : new_array(ShapeArray, 4)
  5 : load_local(0)
  6 : store_field(2)
  7 : nop

procedure 'System.Graphics.init'
definition
module id 1489900195
id 17
frame size: 3
code
  0 : receive(0)
  1 : new_object(Color)
  2 : push_value(255)
  3 : push_value(0)
  4 : push_value(0)
  5 : push_value(0)
  6 : call_ctor(1489900195, 2)
  7 : store_global(0)
  8 : new_object(Color)
  9 : push_value(255)
  10 : push_value(255)
  11 : push_value(255)
  12 : push_value(255)
  13 : call_ctor(1489900195, 2)
  14 : store_global(1)
  15 : new_object(Pen)
  16 : load_global(0)
  17 : call_ctor(1489900195, 3)
  18 : store_global(2)
  19 : nop

